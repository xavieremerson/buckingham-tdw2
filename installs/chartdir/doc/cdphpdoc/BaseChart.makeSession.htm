<HTML>
<HEAD>
<Title>BaseChart.makeSession</Title>
<link type='text/css' rel='Stylesheet' href='maxchartapi.css'/>
</HEAD>
<body bgcolor="#FFFFFF" text="#000000" topmargin="0" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0">

<p class="heading0">ChartDirector Ver 3.0 (PHP Edition)</p>
<p class="heading1"><a href="BaseChart.htm">BaseChart</a>.makeSession</p>
<hr class="separator">
<p class="heading2a">Usage</p>
<div class="content">
makeSession(name[, imageFormat])
</div>
<p class="heading2">Description</p>
<div class="content">
Generate the chart as an image and save it to a session variable.<br><br>
This method is designed to support web applications styles where the chart is generated in the HTML page (eg. applications involving clickable charts). In HTML, an image can only be delivered using an &lt;IMG&gt; tag in the page. So after the chart image is created, it needs to be stored in the server temporarily to wait for the browser to retreive it using the &lt;IMG&gt; tag URL.<br><br>
(An alternative would be to create the chart image when the server receives the &lt;IMG&gt; tag URL request from the browser. In this method, the chart image can be streamed directly to the browser without any temporary storage.)<br><br>
The makeSession method returns a HTTP query string as follows:<br><br>
<div style="margin-left:25">img={name}&id={unique_random_string}&[SID]</div><br> where {name} is the name of the session variable, and {unique_random_string} is a string generated by ChartDirector for creating unique URL. (This is to avoid caching problems with browsers.) [SID] is a query parameter automatically generated by PHP for browsers that do not support cookies. Its purpose is to allow PHP to support session variables without using cookies.<br><br>
The HTTP query string is designed to be used with another ChartDirector utility <b>myimage.php</b>, which retrieves the image from the session variable and returns it to the browser<br><br>
In a typical application, the chart is created in the main HTML web page using code similar to:<br><br>
<div style="margin-left:25">$query1 = $c->makeSession("chart1")</div><br> The web page then includes an &lt;IMG&gt; tag as follows: <div style="margin-left:25">&lt;IMG SRC="myimage.php?&lt;?php echo query1 ?&gt"&gt;</div><br> When the browser reads the HTML web page and sees the &lt;IMG&gt; tag, it will load the image using <b>myimage.php</b> from another HTTP connection.<br><br>
Note that the above assumes the <b>myimage.php</b> is located in the same directory as your web page. If it is in a different directory, you would need to modify the path in the &lt;IMG&gt; tag.<br><br>
For reference, the following is the source code of <b>myimage.php</b>.<br><br>
<table width="98%" border="0" cellpadding="10"><tr><td bgcolor="#cccccc">
<xmp><?php
session_start();
print $HTTP_SESSION_VARS[$HTTP_GET_VARS["img"]];
?></xmp> </td></tr></table>
</div>
<p class="heading2">Arguments</p>

<div class="content">
<table border="1" cellpadding="5" cellspacing="0" width="98%"> 
<tr>
<th width="19%">Argument</th><th width="19%">Default</th><th width="60%">Description</th>
</tr>
<tr>
<td>name</td><td>(Mandatory)</td><td>The name of the session variable used to store the chart image. If there are multiple chart images in the same web page, each image must use a different name.</td></tr><tr><td>imageFormat</td><td><a href="BaseChart.makeChart2.htm">PNG</a></td><td>A constant representing the format of the image. Must be one of the pre-defined constants <a href="BaseChart.makeChart2.htm">PNG</a>, <a href="BaseChart.makeChart2.htm">JPG</a>, <a href="BaseChart.makeChart2.htm">GIF</a>, <a href="BaseChart.makeChart2.htm">BMP</a> or <a href="BaseChart.makeChart2.htm">WMP</a>.</td>
</tr>
</table>
</div>

<p class="heading2">Return Value</p>
<div class="content">
A string representing the query parameters for retrieving the image using the <b>myimage.php</b> utility.
</div>
<br><hr class="separator">
<div class="copyright">&copy; 2003 Advanced Software Engineering Limited. All rights reserved.</div>
</body>
</HTML>
