<HTML>
<HEAD>
<Title>Trouble-Shooting ChartDirector for PHP Installation</Title>
<link type='text/css' rel='Stylesheet' href="maxchartapi.css" />
</HEAD>
<body bgcolor="#FFFFFF" text="#000000" topmargin="0" leftmargin="0" rightmargin="0" marginwidth="0" marginheight="0">
<p class="heading0">ChartDirector Ver 5.0 (PHP Edition)</p>
<p class="heading1">Trouble-Shooting ChartDirector for PHP Installation</p>
<hr class="separator">
<div class="content">This is a guide for trouble-shooting ChartDirector for PHP installation issues.
</div><p class="heading1a">Getting the Error Message</p><div class="content">
To trouble-shoot any problem, the most important thing is to obtain the error message.<br><br>
If you see an error message with heading <b><i>Error Loading ChartDirector for PHP Extension</i></b>, then you have already obtained the error message. Otherwise, please copy "ChartDirector/phpdemo/cdinfo.php" to your web server and access it. It will check your ChartDirector installation and show you any error.<br><br>
If you are using extension statement in "php.ini" to pre-load ChartDirector, but the "cdinfo.php" script above is still trying to dynamically load ChartDirector, probably pre-loading has failed. The pre-loading error message can be found in the web server error log file. For certain web servers on Windows, a window may pop-up to display the error message.<br><br>
If you are using extension statement in "php.ini" to pre-load ChartDirector, but nothing happens (not even an error message in the error log) as if the statement is ignored, please verify the "php.ini" you use is the real "php.ini" used by your PHP (use <a href="phpconcepts.htm#phpinfo">phpinfo</a> to confirm). Also remember to restart your web server for the modified "php.ini" to take effect.
</div><p class="heading1a">Error Messages and Their Resolutions</p><div class="content">
The followings list out common errors that may occur during ChartDirector for PHP installation.<br><br>
<div style="background-color:#cccccc;width:99%;padding:10px">
<b>Note:</b> The exact error messages may vary depending on your operating system type and version, as well as your PHP version. For example, access security violations may report as "Permission Denied" or "Access Denied", depending on your operating system type and version.
</div><br>
<table border="1" cellspacing="0" cellpadding="10"><tr><td> <b>No error message, but no text is being displayed on charts</b><br><br>
<b><u>Cause</u></b><br> ChartDirector cannot access the fonts. For Windows, the fonts are assumed to be in the "[windows]\fonts" subdirectory. For Mac OS X, the fonts are assumed to be in the "/Library/Fonts" and "/System/Library/Fonts" subdirectory. For Linux, FreeBSD and Solaris, the fonts are assumed to be in the "fonts" subdirectory under the directory that contains the ChartDirector for PHP extensions.<br><br>
The "cdinfo.php" output contains a "Font Loading Test" section that prints out the directory where ChartDirector is searching for the fonts, and the reason that they cannot be accessed.<br><br>
For Linux, FreeBSD and Solaris, one common cause of this error is that the ChartDirector for PHP extensions are copied to another directory (eg. to the <a href="phpconcepts.htm#extdir">PHP extension directory</a>), but the fonts subdirectory are not copied. As a result, ChartDirector cannot find the fonts.<br><br>
Another common cause of the error is that the web server anonymous user may not have sufficient privileges to read the font files.<br><br>
<b><u>Solution</u></b><br> <ul> <li>If the error is because of missing "fonts" subdirectory in Linux, FreeBSD or Solaris, please copy the fonts subdirectory to the same directory that contains the ChartDirector for PHP extensions.<br><br>
<li>If the error is due to access security issues, please configure your system to allow everyone to access the font files. </ul> </tr></td><tr><td> <b>PHP error: Dynamically loaded extensions aren't allowed when running in Safe Mode</b><br><br>
<b><u>Cause</u></b><br> Your PHP is configured to run in Safe Mode, and so does not allow dynamic loading of extensions. As a result, ChartDirector cannot be loaded dynamically.<br><br>
<b><u>Solution</u></b><br> <ul> <li><a href="phpinstall.htm#preload">Use extension statement in php.ini to load ChartDirector</a>.<br><br>
<li>Configure your PHP not to run in Safe Mode. This is by setting "safe_mode=No" in <a href="phpconcepts.htm#phpini">php.ini</a> and then restart the web server. </ul> </td></tr><tr><td> <b>PHP error: Dynamically loaded extensions aren't enabled</b><br><br>
<b><u>Cause</u></b><br> Your PHP is configured to disable dynamic loading of extensions. As a result, ChartDirector cannot be loaded dynamically.<br><br>
<b><u>Solution</u></b><br> <ul> <li><a href="phpinstall.htm#preload">Use extension statement in php.ini to load ChartDirector</a>.<br><br>
<li>Configure your PHP to enable dynamic loading of extensions. This is by setting "enable_dl=On" in <a href="phpconcepts.htm#phpini">php.ini</a> and then restart the web server. </ul> </td></tr><tr><td> <b>PHP error: Not supported in multithreaded Web servers - use extension statements in your php.ini</b><br><br>
<b><u>Cause</u></b><br> Your PHP is compiled as a multi-threaded web server module, and do not support dynamic loading of extensions.<br><br>
<b><u>Solution</u></b><br> <ul> <li><a href="phpinstall.htm#preload">Use extension statement in php.ini to load ChartDirector</a>.<br><br>
<li>Configure your web server to use PHP as CGI/FastCGI, as opposed to as a web server module. (This step requires familiarity with web server configuration.) </ul> </td></tr><tr><td> <b> Failed opening required 'path/to/phpchartdir.php' (include_path='[list_of_paths]') </b><br><br>
<b><u>Cause</u></b><br> PHP cannot locate "path/to/phpchartdir.php". This file is in the "ChartDirector/lib" subdirectory under the directory that you extract ChartDirector.<br><br>
If you are using a relative path name, PHP will search for the file using the directories in the PHP include path. The PHP include path usually contains "." (the current directory) as one of the directories. You may use <a href="phpconcepts.htm#phpinfo">phpinfo</a> to determine your PHP include path configuration.<br><br>
If you are using an absolute path name (eg. a path name starting with a slash "/"), note that the path is a file system path. That means the root is the file system root directory, not your web server root directory.<br><br>
<b><u>Solution</u></b><br> <ul> <li>If "path/to/phpchartdir.php" is a relatively path, please make sure it exists in one of the PHP include path directories.<br><br>
<li>If "/path/to/phpchartdir.php" is an absolutely path, please make sure it exists in the file system, with the leading "/" means the file system root.<br><br>
<li>When copying "phpchartdir.php", please copy everything in "ChartDirector/lib" together (including the fonts subdirectory in Linux, FreeBSD and Solaris versions). The files in "ChartDirector/lib" are inter-dependent. </ul> </td></tr><tr><td> <a name="notfound"></a><b> PHP error: Unable to load dynamic library '/path/to/phpchartdir###.dll'<br><br>
<ul> <li>The specified module could not be found. <li>cannot open shared object file: No such file or directory <li>open failed: No such file or directory <li>Cannot open "/path/to/phpchartdir###.dll" </ul> </b> <b><u>Cause</u></b><br> <ul> <li>PHP cannot locate the ChartDirector extension DLL/shared objects. For FreeBSD, the error may also be caused by <a href="#access">access permission denied</a>.<br><br>
<li>The extension DLL/shared object is 32-bit, but your PHP interpreter is 64-bit, or vice versa. Some operating systems can report a "No such file or directory" error if it can find the DLL/shared object, but the 32-bit/64-bit setting of the DLL/shared object does not match with that of the host process (the PHP interpreter). </ul> <b><u>Solution</u></b><br> <ul> <li>The error message should contain a directory path showing where ChartDirector is attempting to load the extension DLL/shared objects. ChartDirector may search multiple locations. In this case, there will be multiple error messages and multiple directory paths.<br><br>
If one of the directory path is an absolute path without ambiguity, please copy everything in "ChartDirector/lib" (including the fonts subdirectory in Linux, FreeBSD and Solaris versions) to that directory.<br><br>
If all paths are relative or ambiguous, it is because the <a href="phpconcepts.htm#extdir">PHP extension directory</a> is ambiguous (eg. being a relative path). In this case, please reconfigure your PHP extension directory to remove the ambiguity.<br><br>
<li>For FreeBSD, you may also try the solution suggested for <a href="#access">access permission denied</a>.<br><br>
<li>Please check if you are using 32-bit or 64-bit PHP (use <a href="phpconcepts.htm#phpinfo">phpinfo</a> to confirm). Make sure the ChartDirector edition you are using matches with your PHP. </ul> </td></tr><tr><td> <a name="access"></a><b>PHP error: Unable to load dynamic library '/path/to/phpchartdir###.dll'<br><br>
<ul> <li>Permission denied <li>Access is denied </ul> </b> <b><u>Cause</u></b><br> "phpchartdir###.dll" is not accessible to the web server anonymous user for security reasons.<br><br>
<b><u>Solution</u></b><br> Make sure all ChartDirector extension files, such as "phpchartdir###.dll" and "libchartdir.so" (for Linux, FreeBSD, Mac OS X and Solaris) / "chartdir.dll" (for Windows), are readable by everyone.
</td></tr><tr><td> <b>PHP error: Unable to load dynamic library '/path/to/phpchartdir###.dll'<br><br>
<ul> <li>not a valid Win32 application. <li>invalid ELF header <li>ELF file data encoding not little-endian <li>ELF file OS ABI invalid <li>wrong ELF data format: ELFDATA2LSB <li>unknown file type <li>invalid file format <li>unsupported file layout <li>Shared object "libc.so.6" not found </ul> </b> <b><u>Cause</u></b><br> <ul> <li> The ChartDirector installed is not for your operating system. For example, you may be using ChartDirector for Windows on a Linux server, or ChartDirector for Linux on a FreeBSD server, etc.<br><br>
<li>The file 'phpchartdir###.dll' may be corrupted (eg. FTP in ASCII mode instead of binary mode). </ul> <b><u>Solution</u></b><br> <ul> <li>Make sure you are using the ChartDirector edition that is appropriate for your operating system. You may refer to <a href="phpinstall.htm">Installing ChartDirector for PHP</a> on how to identify the ChartDirector edition and the operating system you are using.<br><br>
<li>Make sure the files 'phpchartdir###.dll' are not corrupted by comparing the file sizes with the files extracted from the ChartDirector download. </ul> </td></tr><tr><td> <b>PHP error: Unable to load dynamic library '/path/to/phpchartdir###.dll' - The specified procedure could not be found.</b><br><br>
<table border="1" cellspacing="0" cellpadding="5"><tr><td bgcolor="#CCCCCC"> *** Note ***: Do not confuse this error with a similar error '<a href="#notfound">The specified module could not be found</a>.' These two errors have different cause and solution. </td></tr></table> <br> This error is the same as the <a href="#mismatch">PHP API mismatch error</a>, and has the same cause and solution.
</td></tr><tr><td> <a name="mismatch"></a><b> PHP error: ChartDirector PHP API: Unable To Initialize module<br> Module compiled with module API=########, debug=#, thread-safety=#<br> PHP compiled with module API=########, debug=#, thread-safety=#<br> These options need to match </b><br><br>
<b><u>Cause</u></b><br> PHP can only load extension modules that matches exactly with its module API version, debug mode flag, and thread-safety flag.<br><br>
ChartDirector comes with many extension modules to support various combinations of module API version, debug mode flag, and thread-safety flag configurations. However, to limit the number of combinations, some unreasonable combinations are not supported:<br><br>
<ul> <li>PHP compiled in debug mode (debug=1) is not supported. PHP in debug mode is for debugging the PHP interpreter itself. It is not needed for debugging PHP scripts. So a PHP developer should never need to use PHP in debug mode.<br><br>
<li>PHP on Windows compiled in single-threaded mode (thread-safety=0) is not supported. Because of the nature of Windows, PHP on Windows should always be in multi-threaded mode to achieve acceptable performance. </ul> If you are using extension statement to load ChartDirector, the error may be because the extension module entered into <a href="phpconcepts.htm#phpini"> php.ini</a> does not match the actual type of your PHP.<br><br>
For example, if you use "phpchartdir410.dll" for PHP 4.2.3, the module API will not match. Similarly, if you use "phpchartdir421mt.dll" on Linux, but your PHP is single-threaded, the thread-safety settings will not match.<br><br>
<b><u>Solution</u></b><br> <ul> <li>If your PHP is compiled in debug mode (debug=1), please consider compile or download another PHP interpreter that is not in debug mode.<br><br>
<li>If your PHP is compiled as single-threaded PHP on Windows, please consider compile or download another PHP interpreter that is in multi-threaded mode. You may consider to download the binary release of PHP from PHP's official web site <a href="http://www.php.net">www.php.net</a>.<br><br>
<li>If you are using extension statement to load ChartDirector, please follow the steps in <a href="phpinstall.htm#preload">Use extension statement in php.ini to load ChartDirector</a> to identify your PHP type and choose the appropriate ChartDirector extension module to use. </ul> </td></tr><tr><td> <b>PHP error: ChartDirector PHP API: Unable to initialize module</b><br><br>
<b><u>Cause</u></b><br> The file "libchartdir.so" (for Linux, FreeBSD, Mac OS X and Solaris) or "chartdir.dll" (for Windows) is missing, corrupted, or not accessible for security reasons.<br><br>
<b><u>Solution</u></b><br> <ul> <li>Make sure "libchartdir.so" (for Linux, FreeBSD, Mac OS X and Solaris) or "chartdir.dll" (for Windows) is in the same directory as "phpchartdir###.dll".<br><br>
<li>Make sure the above file is readable by everyone.<br><br>
<li>Verify the file is not corrupted by comparing the file size with the file extracted from the ChartDirector download. If you upload the file using FTP, please upload in binary mode. </ul> </td></tr><tr><td> <b>Version mismatch : "phpchartdir.php" is of version ##.##, but "libchartdir.so" (or "chartdir.dll") is of version ##.##.</b><br><br>
<b><u>Cause</u></b><br> ChartDirector consists of two parts - the "phpchartdir.php" script, plus the ChartDirector extension DLLs and/or shared objects. Their versions need to match. The most common causes are:<br><br>
<ul> <li>You have upgraded "phpchartdir.php" but forgot to upgrade the extension DLLs and/or shared objects, or vice versa.<br><br>
<li>Your PHP is configured to use extension statement to load ChartDirector, but the web server has not been restarted after the upgrade, so it is still using the old version.<br><br>
<li>There are multiple copies of "phpchartdir.php" and ChartDirector extension DLLs and/or shared objects in the server system (eg. "ChartDirector/lib" might be copied to the <a href="phpconcepts.htm#extdir">PHP extension directory</a>). You have upgraded one copy, but your web server is using another copy. </ul> <b><u>Solution</u></b><br> <ul> <li> Ensure both "phpchartdir.php" and the ChartDirector extension DLLs and/or shared objects ("chartdir.dll" or "libchartdir.so", and also "phpchartdir###.dll") are upgraded. Verify that their file sizes are the same as the same files in the ChartDirector download.<br><br>
<li>If you are using extension statement to load ChartDirector, please restart your web server after upgrade.<br><br>
<li>If you have copied ChartDirector to multiple places in the server, please upgrade all of them to avoid different versions get mixed up. </ul> </td></tr><tr><td> <b>ChartDirector requires PHP 4.0.4 or above, but the current PHP version is ##.##.##.</b><br><br>
<b><u>Cause</u></b><br> ChartDirector requests at least PHP 4.0.4, but your PHP version is too old.<br><br>
<b><u>Solution</u></b><br> Upgrade your PHP.
</td></tr></table><br>
</div><p class="heading1a">Contacting Support Service</p><div class="content">
If this guide still does not solve the problem, you may contact our support service at <a href="mailto:support@advsofteng.net">support@advsofteng.net</a>. Please include the error message and the output of <a href="phpconcepts.htm#phpinfo">phpinfo</a> in your email.</div><br>
<hr class="separator"><div class="copyright">&copy; 2008 Advanced Software Engineering Limited. All rights reserved.</div></body>
</HTML>
