<HTML
><HEAD
><TITLE
>Introduction - validation and filters</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="Validation and filters"
HREF="package.html.html-quickform.html#package.html.html-quickform.values.validation"><LINK
REL="PREVIOUS"
TITLE="HTML_QuickForm"
HREF="package.html.html-quickform.html"><LINK
REL="NEXT"
TITLE="HTML_QuickForm::addRule()"
HREF="package.html.html-quickform.html-quickform.addrule.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="package.html.html-quickform.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="package.html.html-quickform.html-quickform.addrule.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="package.html.html-quickform.intro-validation">Introduction - validation and filters</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN62758"
></A
>Introduction - validation and filters&nbsp;--&nbsp;How to process submitted data</DIV
><DIV
CLASS="refsect1"
><A
NAME="package.html.html-quickform.intro-validation.rules"
></A
><H2
>Validation rules</H2
><P
>&#13;QuickForm makes client-side and server-side form validation easy. It allows for validation against regular
expressions or custom functions and methods. You can define your own validation rules and apply them to
the elements or groups you want. In this section, we will explore the different possibilities QuickForm
offers to make validation easier.
    </P
><P
>&#13;QuickForm can verify if required elements are filled when the form is submitted. This works with every type of elements or groups, integer 0 is not considered as an empty value.
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>require_once 'HTML/QuickForm.php';

$form = new HTML_QuickForm('myform', 'post');
$form-&#62;addElement('text', 'email', 'Your email:');
$form-&#62;addElement('submit', 'submit', 'Submit');

// Validation rules

$form-&#62;addRule('email', 'E-Mail is required', 'required');

// Validation

if ($form-&#62;validate()) {
    $form-&#62;freeze();
}
$form-&#62;display();</PRE
></TD
></TR
></TABLE
>
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>On empty elements validation: </B
>
If the element is empty, no validation rules other than <TT
CLASS="varname"
>required</TT
> are checked for it. This means that empty element can be invalid <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>only</I
></SPAN
> when it is required.
       </P
></BLOCKQUOTE
></DIV
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>On required uploads: </B
>
<TT
CLASS="varname"
>required</TT
> rule does not work for file elements. Use <TT
CLASS="varname"
>uploadedfile</TT
>.
       </P
></BLOCKQUOTE
></DIV
><P
>&#13;The <B
CLASS="function"
>HTML_QuickForm::validate()</B
> method will scan through each rules in the order they have been set. If a rule is not validated, the error message corresponding to the element will be displayed and the form will be shown once again. You can use templates to set the position of this error message. The order you decide to set your validation rules is important because it will determine which error message is used.
    </P
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.client"
></A
><H3
>Client-side validation</H3
><P
>&#13;QuickForm can generate the javascript necessary to validate the form on the client side. This feature works for all standard elements and for groups. Server side validation is always performed in case the client has javascript turned off.
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$form-&#62;addRule('email', 'E-Mail is required', 'required', null, 'client');</PRE
></TD
></TR
></TABLE
>
    </P
><DIV
CLASS="tip"
><BLOCKQUOTE
CLASS="tip"
><P
><B
>Tip: </B
>
By setting the parameter <TT
CLASS="literal"
>'client'</TT
>, you trigger the javascript automatic generation.
    </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.builtin"
></A
><H3
>Built-in validation rules</H3
><P
>&#13;QuickForm offers a few registered rules that are often used when validating 
forms. Some of the rules may need an extra <TT
CLASS="varname"
>$format</TT
> parameter
passed to <A
HREF="package.html.html-quickform.html-quickform.addrule.html"
><B
CLASS="function"
>addRule()</B
></A
> /
<A
HREF="package.html.html-quickform.html-quickform.addgrouprule.html"
><B
CLASS="function"
>addGroupRule()</B
></A
>
to work properly.
      <DIV
CLASS="table"
><A
NAME="AEN62793"><P
><B
>Table 41-1. List of built-in validation rules</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
WIDTH="33%"
ALIGN="LEFT"
VALIGN="MIDDLE"
>Name</TH
><TH
WIDTH="33%"
ALIGN="LEFT"
VALIGN="MIDDLE"
>Description</TH
><TH
WIDTH="33%"
ALIGN="LEFT"
VALIGN="MIDDLE"
><TT
CLASS="varname"
>$format</TT
> parameter</TH
></TR
></THEAD
><TBODY
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>required</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value is not empty</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>maxlength</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must not exceed given number of characters</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>number of characters, integer</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>minlength</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must have more than given number of characters</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>number of characters, integer</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>rangelength</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must have between min and max characters</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>array(min characters, max characters)</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>regex</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must pass the regular expression</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>regular expression to check, string</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>email</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value is a correctly formatted email</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>whether to perform an additional domain check via <A
HREF="http://www.php.net/manual-lookup.php?pattern=checkdnsrr"
TARGET="_top"
><B
CLASS="function"
>checkdnsrr()</B
></A
> function, boolean</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>lettersonly</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must contain only letters</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>alphanumeric</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must contain only letters and numbers</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>numeric</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must be a number</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>nopunctuation</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must not contain punctuation characters</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>nonzero</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>value must be a number not starting with 0</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>compare</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&#13;                The rule allows to compare the values of two form fields. 
                This can be used for e.g. 'Password repeat must match 
                password' kind of rule. Please note that you need to pass an
                array of elements' names to compare as a first parameter to
                <A
HREF="package.html.html-quickform.html-quickform.addrule.html"
><B
CLASS="function"
>addRule()</B
></A
>.
              </TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><P
>Type of comparison to perform, string:
                <P
></P
><DIV
CLASS="variablelist"
><DL
><DT
><TT
CLASS="parameter"
><I
>'eq'</I
></TT
> or <TT
CLASS="parameter"
><I
>'=='</I
></TT
></DT
><DD
><P
>(default) the elements should have the same values</P
></DD
><DT
><TT
CLASS="parameter"
><I
>'neq'</I
></TT
> or <TT
CLASS="parameter"
><I
>'!='</I
></TT
></DT
><DD
><P
>the elements should have different values</P
></DD
><DT
><TT
CLASS="parameter"
><I
>'gt'</I
></TT
> or <TT
CLASS="parameter"
><I
>'&#62;'</I
></TT
></DT
><DD
><P
>first element's value should be greater (compared as numbers)</P
></DD
><DT
><TT
CLASS="parameter"
><I
>'gte'</I
></TT
> or <TT
CLASS="parameter"
><I
>'&#62;='</I
></TT
></DT
><DD
><P
>first element's value should be greater or equal (compared as numbers)</P
></DD
><DT
><TT
CLASS="parameter"
><I
>'lt'</I
></TT
> or <TT
CLASS="parameter"
><I
>'&#60;'</I
></TT
></DT
><DD
><P
>first element's value should be smaller (compared as numbers)</P
></DD
><DT
><TT
CLASS="parameter"
><I
>'lte'</I
></TT
> or <TT
CLASS="parameter"
><I
>'&#60;='</I
></TT
></DT
><DD
><P
>first element's value should be smaller or equal (compared as numbers)</P
></DD
></DL
></DIV
>
              </P
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>callback</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&#13;                This rule allows to use an external function/method for 
                validation. This can be done either explicitly, by passing a
                callback as a format parameter or implicitly, by registering 
                it via <A
HREF="package.html.html-quickform.html-quickform.registerrule.html"
><B
CLASS="function"
>registerRule()</B
></A
>.
              </TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>Function/method to use, <A
HREF="http://www.php.net/manual/language.pseudo-types.php"
TARGET="_top"
>callback</A
>.</TD
></TR
><TR
><TD
COLSPAN="3"
ALIGN="CENTER"
VALIGN="TOP"
>Validation rules for file uploads</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>uploadedfile</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>required file upload</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>maxfilesize</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>the file size must not exceed the given number of bytes</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>maximum file size, integer</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>mimetype</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>the file must have a correct MIME type</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>either a string for single allowed MIME type, or an array of allowed MIME types</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
><TT
CLASS="varname"
>filename</TT
></TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>the filename must match the given regex</TD
><TD
WIDTH="33%"
ALIGN="LEFT"
VALIGN="TOP"
>regular expression to test, string</TD
></TR
></TBODY
></TABLE
></DIV
>
    </P
><DIV
CLASS="note"
><BLOCKQUOTE
CLASS="note"
><P
><B
>On rules for file uploads: </B
>
These rules are defined in <TT
CLASS="filename"
>HTML/QuickForm/file.php</TT
>, and are automatically registered when a <TT
CLASS="varname"
>file</TT
> type element is added to the form. These rules are server-side only, for obvious reasons.
      </P
></BLOCKQUOTE
></DIV
><P
>&#13;      Usage of builtin rules is covered in <TT
CLASS="filename"
>rules-builtin.php</TT
>
      example provided with the package. The <TT
CLASS="filename"
>rules-custom.php</TT
>
      example covers the usage of custom rule classes and <TT
CLASS="varname"
>callback</TT
> 
      type rules. It also contains a <B
CLASS="classname"
>NumericRange</B
> class for 
      checking whether a number is between a maximum and a minimum.
    </P
></DIV
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.classes"
></A
><H3
>Validation classes</H3
><P
>&#13;Since release 3.2 all builtin validation is performed by subclasses of <B
CLASS="classname"
>HTML_QuickForm_Rule</B
> class. You can create your own subclass of it and implement <B
CLASS="function"
>validate()</B
> and <B
CLASS="function"
>getValidationScript()</B
> methods. Consult the source for the examples.
    </P
></DIV
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.functions"
></A
><H3
>Validation functions and methods</H3
><P
>&#13;When you need a more complex validation, QuickForm can use your own custom-made functions to validate an element or a group. QuickForm can also call a method of a class. This way, it is possible to use PEAR's <B
CLASS="classname"
>Validate</B
> package or any other class. If you want to use your own functions, you basically have two options:
<P
></P
><OL
TYPE="1"
><LI
><P
>Register the function via <A
HREF="package.html.html-quickform.html-quickform.registerrule.html"
><B
CLASS="function"
>registerRule()</B
></A
> using <TT
CLASS="literal"
>'callback'</TT
> as <TT
CLASS="varname"
>$type</TT
> and giving the new rule a custom <TT
CLASS="varname"
>$ruleName</TT
>. Later you add the rule with this name via <A
HREF="package.html.html-quickform.html-quickform.addrule.html"
><B
CLASS="function"
>addRule()</B
></A
> like any buitin rule.</P
></LI
><LI
><P
>Add the rule of <TT
CLASS="varname"
>callback</TT
> type via <A
HREF="package.html.html-quickform.html-quickform.addrule.html"
><B
CLASS="function"
>addRule()</B
></A
> passing the name of your function as <TT
CLASS="varname"
>$format</TT
>. This way you'll have less characters to type, but will be unable to pass additional data to your function.</P
></LI
></OL
>
    </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN62976"><P
><B
>Example 41-1. Email validation function</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>/**
 * Validate an email address
 *
 * @param string    $email         Email address to validate
 * @param boolean   $domainCheck   Check if the domain exists
 */
function checkEmail($email, $domainCheck = false)
{
    if (preg_match('/^[a-zA-Z0-9\._-]+\@(\[?)[a-zA-Z0-9\-\.]+'.
                   '\.([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/', $email)) {
        if ($domainCheck &#38;&#38; function_exists('checkdnsrr')) {
            list (, $domain)  = explode('@', $email);
            if (checkdnsrr($domain, 'MX') || checkdnsrr($domain, 'A')) {
                return true;
            }
            return false;
        }
        return true;
    }
    return false;
}
$form-&#62;registerRule('checkmail', 'callback', 'checkEmail');
$form-&#62;addRule('email', 'Email is incorrect', 'checkmail', true);</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;You can pass an extra parameter of the type you want to your function when set with <B
CLASS="function"
>HTML_QuickForm::addRule()</B
>. Here we used <TT
CLASS="constant"
><B
>TRUE</B
></TT
> to enable the DNS check of our function.
    </P
><P
>&#13;If you use a method, you must specify the class your method is in. Use this syntax when you register your rule:
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>// Method checkEmail is in class Validate
$form-&#62;registerRule('checkmail', 'callback', 'checkEmail', 'Validate');</PRE
></TD
></TR
></TABLE
>
    </P
><DIV
CLASS="tip"
><BLOCKQUOTE
CLASS="tip"
><P
><B
>Tip: </B
>
You can also use a javascript function to validate your form, give it the same name as your PHP function, have it return a boolean and set the <TT
CLASS="parameter"
><I
>'client'</I
></TT
> parameter.
    </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.groups"
></A
><H3
>Group validation</H3
><P
>&#13;Groups of elements can be validated the same way other elements are, or use a more complex validation scheme. To validate a group as a whole, just use <B
CLASS="function"
>HTML_QuickForm::addRule()</B
>. The group elements' values will be passed to the validation function as an array.
    </P
><P
>&#13;You can have more complex validation for your groups using the <B
CLASS="function"
>HTML_QuickForm::addGroupRule()</B
> method. This allows for a per element validation. It also makes it possible to specify the number of elements that need to be valid for the group to be valid too.
    </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN62993"><P
><B
>Example 41-2. Complex group validation</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>// Group
$id[] = &#38;HTML_QuickForm::createElement('text', 'username', 'Username');
$id[] = &#38;HTML_QuickForm::createElement('text', 'code', 'Code');
$form-&#62;addGroup($id, 'id', 'Your ID:', '-');

// Validation rules per element

$rule['username'][] = array('Username is required', 'required');
$rule['username'][] = array('Username contains only letters', 'lettersonly');
$rule['username'][] = array('Username has between 5-8 characters', 'rangelength', array(5, 8));

$rule['code'][] = array('Code is required', 'required');
$rule['code'][] = array('Code contains numbers only', 'regex', '/^\d+$/');
$rule['code'][] = array('Code is 5 numbers long', 'rangelength', array(5, 5));

$form-&#62;addGroupRule('id', $rule);</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;In this example, we have set rules for the elements inside our group. Instead of using their names, we could have used their index (determined by the order they were created) in the group, it would speed up the validation process.
    </P
><P
>&#13;The following example takes the same group and will validate the form only if at least one of our two elements is not empty. To achieve this, we use the <TT
CLASS="parameter"
><I
>howmany</I
></TT
> parameter and set it to 1.
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$form-&#62;addGroupRule('id', 'Fill at least one element', 'required', null, 1);</PRE
></TD
></TR
></TABLE
>
    </P
></DIV
><DIV
CLASS="refsect2"
><A
NAME="package.html.html-quickform.intro-validation.rules.conclusion"
></A
><H3
>Conclusion</H3
><P
>&#13;You have seen that QuickForm makes it easy to validate your elements and groups without having to write all the usually necessary code to find the different values. It takes care of required elements, generates the javascript automatically and adds a lot of flexibility by allowing you to use your own validation functions and regular expressions. It's time to experiment...
    </P
></DIV
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.html.html-quickform.intro-validation.filters"
></A
><H2
>Filters</H2
><P
>&#13;If we add a rule like
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$form-&#62;addRule('element', 'The element is required', 'required');</PRE
></TD
></TR
></TABLE
>
to the form, then any input will satisfy it, including, for example, a single space. This is because
the rule simply ensures that there are one or more characters present, and a space character
satisfies the rule.
    </P
><P
>&#13;Of course this can be fixed by making a custom regex rule, but there is an easier solution. We usually do
not care about leading and trailing spaces at all, and we can make the element's value pass through
builtin <A
HREF="http://www.php.net/manual-lookup.php?pattern=trim"
TARGET="_top"
><B
CLASS="function"
>trim()</B
></A
> function before doing any
validation on it:
<TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$form-&#62;applyFilter('element', 'trim');</PRE
></TD
></TR
></TABLE
>
    </P
><P
>&#13;Filters are applied recursively, which means that <B
CLASS="function"
>trim()</B
> on an array will work, too. You can
pass any valid <A
HREF="http://www.php.net/manual/language.pseudo-types.php"
TARGET="_top"
>callback</A
> as an argument to
<A
HREF="package.html.html-quickform.html-quickform.applyfilter.html"
><B
CLASS="function"
>applyFilter()</B
></A
> method.
    </P
><P
>&#13;Use filters if you want to 'sanitize' user input and do not really care about invalid values.
    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="package.html.html-quickform.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="package.html.html-quickform.html-quickform.addrule.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>HTML_QuickForm</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="package.html.html-quickform.html#package.html.html-quickform.values.validation"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>HTML_QuickForm::addRule()</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>