<HTML
><HEAD
><TITLE
>-&#62;update()</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="DB_DataObject"
HREF="package.database.db-dataobject.html"><LINK
REL="PREVIOUS"
TITLE="->insert()"
HREF="package.database.db-dataobject.db-dataobject.insert.html"><LINK
REL="NEXT"
TITLE="->delete()"
HREF="package.database.db-dataobject.db-dataobject.delete.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="package.database.db-dataobject.db-dataobject.insert.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="package.database.db-dataobject.db-dataobject.delete.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="package.database.db-dataobject.db-dataobject.update">-&#62;update()</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN26392"
></A
>-&#62;update()&nbsp;--&nbsp;Update objects variables into database</DIV
><DIV
CLASS="refsynopsisdiv"
><A
NAME="AEN26395"><H2
>Synopsis</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN26396"><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>int <B
CLASS="function"
>$DB_DataObject-&#62;update</B
></CODE
> ([dataobject|boolean  $original|$useWhere])</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.desc"
></A
><H2
>Description</H2
><P
>&#13;     Updates current objects variables into the database. if you supply it with a dataObject, as an 
     argument, it will only update the differences between the new and old.
    </P
><P
>&#13;       if  called with DB_DATAOBJECT_WHEREADD_ONLY as the argument, the update
        request is built based on the whereAdd values, rather than the primary
        key. This enables global updates to be performed, rather than single
        row ones.
     </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.parameter"
></A
><H2
>Parameter</H2
><P
>&#13;     <P
></P
><UL
><LI
><P
>&#13;        <TT
CLASS="parameter"
><I
>DataObject $original</I
></TT
> -
        if provided the update query will be built from the difference between the current and 
        original dataobject.
       </P
></LI
></UL
>
    </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.return"
></A
><H2
>Return value</H2
><P
>&#13;     <TT
CLASS="parameter"
><I
>int </I
></TT
> number of rows affected or <TT
CLASS="constant"
><B
>FALSE</B
></TT
> on failure 
    </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.throws"
></A
><H2
>Throws</H2
><P
>&#13;     <DIV
CLASS="table"
><A
NAME="AEN26422"><P
><B
>Table 33-1. Possible PEAR_Error values</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Error code</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Error message</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Meaning</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Solution</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>DB_DATAOBJECT_ERROR_INVALIDCONFIG</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
><SPAN
CLASS="QUOTE"
>"update:No table definition for $table"</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>DB_DATAOBJECT_ERROR_NODATA</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
><SPAN
CLASS="QUOTE"
>"update: No Data specifed for query $settings"</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
></TR
></TBODY
></TABLE
></DIV
>
    </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.note"
></A
><H2
>Note</H2
><P
>This function can not be called
statically.</P
><P
></P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.update.example"
></A
><H2
>Example</H2
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26450"><P
><B
>Example 33-1. Simple fetch and update</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$person = new DataObjects_Person;
$person-&#62;get(12);
$person-&#62;name='fred';
$person-&#62;update();     

$person = new DataObjects_Person;
$person-&#62;get(12);
$original = clone($person); // clone is emulated in php4 for compatibility reasons. 
$person-&#62;name='fred';
$person-&#62;update($original);</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26453"><P
><B
>Example 33-2. Resulting SQL</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>SELECT * FROM person WHERE id = 12
UPDATE person SET name='fred', age='21', eyes='blue' WHERE id = 12

SELECT * FROM person WHERE id = 12
UPDATE person SET name='fred'  WHERE id = 12</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26456"><P
><B
>Example 33-3. Simple fetch and update</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$person = new DataObjects_Person;
$person-&#62;removed=1;
$person-&#62;whereAdd('age &#62; 21');
$person-&#62;update();</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26459"><P
><B
>Example 33-4. Resulting SQL</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>SELECT * FROM person WHERE id = 12;
UPDATE person SET removed=1 WHERE age &#62; 21</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="package.database.db-dataobject.db-dataobject.insert.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="package.database.db-dataobject.db-dataobject.delete.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>-&#62;insert()</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="package.database.db-dataobject.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>-&#62;delete()</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>