<HTML
><HEAD
><TITLE
>-&#62;insert()</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="DB_DataObject"
HREF="package.database.db-dataobject.html"><LINK
REL="PREVIOUS"
TITLE="->count()"
HREF="package.database.db-dataobject.db-dataobject.count.html"><LINK
REL="NEXT"
TITLE="->update()"
HREF="package.database.db-dataobject.db-dataobject.update.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="package.database.db-dataobject.db-dataobject.count.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="package.database.db-dataobject.db-dataobject.update.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="package.database.db-dataobject.db-dataobject.insert">-&#62;insert()</H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN26317"
></A
>-&#62;insert()&nbsp;--&nbsp;Insert current objects variables into database</DIV
><DIV
CLASS="refsynopsisdiv"
><A
NAME="AEN26320"><H2
>Synopsis</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN26321"><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>mixed <B
CLASS="function"
>$DB_DataObject-&#62;insert</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.insert.desc"
></A
><H2
>Description</H2
><P
>&#13;     Insert the data into the database, based on the variable values of the current object and returns the ID
     of the inserted element if sequences or primary keys are being used. The values are correctly quoted,
     and some limited type checking is done.
    </P
><P
>&#13;     With mysql, the mysql_next_id() method is used, on other databases, PEAR DB sequence method is
     used.
    </P
><P
>&#13;    Note, insert() may not return the ID correctly in quite a few situations:
    </P
><P
>&#13;        <P
></P
><UL
><LI
><P
>If the database backend does not support it.</P
></LI
><LI
><P
>The generator did not correctly flag the correct column as autoincrement/nextval</P
></LI
><LI
><P
>An error occured (turn on debugging to see it)</P
></LI
><LI
><P
>The insert failed or '0' rows where affected.</P
></LI
></UL
>
      </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.insert.return"
></A
><H2
>Return value</H2
><P
>&#13;     <TT
CLASS="parameter"
><I
>mixed</I
></TT
> -  Id or key
    </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.insert.throws"
></A
><H2
>Throws</H2
><P
>&#13;     <DIV
CLASS="table"
><A
NAME="AEN26348"><P
><B
>Table 33-1. Possible PEAR_Error values</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><THEAD
><TR
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Error code</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Error message</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Meaning</TH
><TH
ALIGN="LEFT"
VALIGN="MIDDLE"
>Solution</TH
></TR
></THEAD
><TBODY
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>DB_DATAOBJECT_ERROR_INVALIDCONFIG</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
><SPAN
CLASS="QUOTE"
>"insert:No table definition for $table"</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>DB_DATAOBJECT_ERROR_NODATA</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
><SPAN
CLASS="QUOTE"
>"insert: No Data specifed for query"</SPAN
></TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>&nbsp;</TD
></TR
><TR
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>DB_*</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>*</TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>see PEAR::<A
HREF="package.database.db.html"
><B
CLASS="classname"
>DB</B
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="MIDDLE"
>see PEAR::<A
HREF="package.database.db.html"
><B
CLASS="classname"
>DB</B
></A
></TD
></TR
></TBODY
></TABLE
></DIV
>
    </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.insert.note"
></A
><H2
>Note</H2
><P
>This function can not be called
statically.</P
><P
></P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="package.database.db-dataobject.db-dataobject.insert.example"
></A
><H2
>Example</H2
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26385"><P
><B
>Example 33-1. Simple insert</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$person = new DataObjects_Person;
$person-&#62;name='fred';
$id = $person-&#62;insert();</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN26388"><P
><B
>Example 33-2. Resulting SQL</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>INSERT INTO person (name) VALUES ('fred');</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="package.database.db-dataobject.db-dataobject.count.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="package.database.db-dataobject.db-dataobject.update.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>-&#62;count()</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="package.database.db-dataobject.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>-&#62;update()</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>